<div class="max-w-7xl mx-auto my-4 bg-white rounded-lg shadow p-4">
  <div class="filter-ui mb-3 flex flex-wrap items-center gap-2">
    <select [(ngModel)]="filterColumn" class="border rounded px-2 py-1 text-sm w-auto">
      <option value="">-- Choose Column --</option>
      <option value="departureLocation">Departure Location</option>
      <option value="destination">Destination</option>
      <option value="departureTime">Departure Time</option>
      <option value="availablePlaces">Available Places</option>
      <option value="pricePerSeat">Price per Seat</option>
      <option value="status">Status</option>
    </select>

    <input [(ngModel)]="filterValue" type="text" class="border rounded px-2 py-1 text-sm w-auto" placeholder="Filter value" />

    <button class="px-3 py-1 rounded bg-primary text-white text-sm" (click)="applyFilter()">Apply Filter</button>
    <button class="px-3 py-1 rounded bg-secondary text-white text-sm" (click)="resetFilter()">Reset</button>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">#</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Departure Location</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Destination</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Departure Time</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Available Places</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Price per Seat</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Status</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Visualize the Ride</th>
          <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ride of rides$ | async; let i = index" [ngClass]="ride.status === 'over' ? 'bg-green-50' : ride.status === 'canceled' ? 'bg-gray-100' : ''">
          <td class="px-4 py-2 text-sm">{{ i + 1 }}</td>
          <td class="px-4 py-2 text-sm">{{ ride.departureLocation }}</td>
          <td class="px-4 py-2 text-sm">{{ ride.destination }}</td>
          <td class="px-4 py-2 text-sm">{{ ride.departureDate }} {{ ride.departureTime }}</td>
          <td class="px-4 py-2 text-sm">{{ ride.availablePlaces }}</td>
          <td class="px-4 py-2 text-sm">{{ ride.pricePerSeat }} TND</td>
          <td class="px-4 py-2 text-sm">{{ ride.status || 'in-progress' }}</td>
          <td class="px-4 py-2 text-center text-sm">
            <a [routerLink]="['/dashboard/rides/ride-visualize', ride.id]" [state]="{ ride: ride }" class="px-2 py-1 border rounded text-sm inline-block hover:bg-gray-50">
              <i class="bi bi-geo-alt-fill"></i>
            </a>
          </td>
          <td class="px-4 py-2 text-sm">
            <button *ngIf="ride.status !== 'over' && ride.status !== 'canceled'" class="px-2 py-1 rounded bg-warning text-black text-sm mr-1" (click)="markAsOver(ride)">Mark as Over</button>
            <button *ngIf="ride.status !== 'over' && ride.status !== 'canceled'" class="px-2 py-1 rounded bg-danger text-white text-sm" (click)="cancelRide(ride)">Cancel</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
