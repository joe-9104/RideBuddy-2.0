<nav class="navbar navbar-expand-lg py-3 bg-light">
  <div class="container-fluid px-5">
    <!-- Brand -->
    <a
      class="navbar-brand d-flex align-items-center text-primary fw-bold"
      routerLink="/"
    >
      <img
        src="assets/ridebuddy.png"
        alt="RideBuddy Logo"
        class="u-logo-40 me-2"
      />
      RideBuddy
    </a>

    <!-- Menu (always visible on desktop and mobile) -->
    <div class="d-flex flex-column flex-lg-row align-items-center ms-auto">
      <!-- Left Links -->
      <ul class="navbar-nav d-flex flex-row me-lg-auto mb-2 mb-lg-0">
        <li class="nav-item me-3">
          <a routerLink="/" class="nav-link text-primary fw-bold">Home</a>
        </li>
        <li class="nav-item me-3">
          <a routerLink="/contact" class="nav-link text-primary fw-bold">Contact</a>
        </li>
      </ul>

      <!-- Guest Buttons -->
      <div *ngIf="!(user$ | async)" class="d-flex align-items-center">
        <a
          routerLink="/register"
          class="btn btn-primary me-2 rounded-pill"
        >
          Register
        </a>
        <a
          routerLink="/login"
          class="btn btn-outline-primary rounded-pill"
        >
          Login
        </a>
      </div>

      <!-- Logged-in User Dropdown -->
      <div *ngIf="user$ | async as user" class="dropdown ms-3">
        <a
          class="d-flex align-items-center text-decoration-none dropdown-toggle text-primary fw-bold"
          href="#"
          id="userMenu"
          role="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <img
            src="/assets/driver-2.svg"
            alt="Profile"
            class="rounded-circle me-2 border border-2 border-primary u-logo-40"
          />
          <span>{{ user.displayName }}</span>
        </a>

        <ul
          class="dropdown-menu dropdown-menu-end shadow rounded"
          aria-labelledby="userMenu"
        >
          <li>
            <span class="dropdown-item disabled text-primary fw-bold">
              Role: {{ user.role }}
            </span>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item" routerLink="/profile">
              <i class="bi bi-person me-2"></i> Profile
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/settings">
              <i class="bi bi-gear me-2"></i> Settings
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <button class="dropdown-item" (click)="logout()">
              <i class="bi bi-box-arrow-left me-2"></i> Logout
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
