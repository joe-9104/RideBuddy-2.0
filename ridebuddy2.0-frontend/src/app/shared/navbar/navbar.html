<nav class="w-full bg-white/90 backdrop-blur shadow-sm border-b border-gray-100">
  <div class="max-w-7xl mx-auto px-5 py-3 flex items-center justify-between">
    <!-- Brand -->
    <a routerLink="/" class="flex items-center text-primary font-bold">
      <img
        src="assets/ridebuddy.png"
        alt="RideBuddy Logo"
        class="u-logo-40 mr-2"
      />
      <span>RideBuddy</span>
    </a>

    <!-- Menu (always visible on desktop and mobile) -->
    <div class="flex flex-col lg:flex-row items-center ml-auto">
      <!-- Left Links -->
      <ul class="flex flex-row lg:mr-6 space-x-6">
        <li>
          <a routerLink="/" class="text-primary font-semibold">Home</a>
        </li>
        <li>
          <a routerLink="/contact" class="text-primary font-semibold">Contact</a>
        </li>
      </ul>

      <!-- Guest Buttons -->
      <div *ngIf="!(user$ | async)" class="flex items-center space-x-3">
        <a
          routerLink="/register"
          class="px-4 py-2 rounded-full text-sm font-medium bg-primary text-white hover:bg-primary/90 transition"
        >
          Register
        </a>
        <a
          routerLink="/login"
          class="px-4 py-2 rounded-full text-sm font-medium border border-primary text-primary hover:bg-primary hover:text-white transition"
        >
          Login
        </a>
      </div>

      <!-- Logged-in User Dropdown -->
      <div *ngIf="user$ | async as user" class="relative ml-3">
        <button
          (click)="toggleMenu()"
          class="flex items-center text-primary font-bold focus:outline-none"
        >
          <img
            src="/assets/driver-2.svg"
            alt="Profile"
            class="rounded-full mr-2 border-2 border-primary u-logo-40"
          />
          <span>{{ user.displayName }}</span>
        </button>

        <div
          *ngIf="menuOpen"
          class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5"
        >
          <div class="py-2">
            <div class="px-4 text-sm text-primary font-bold">
              Role: {{ user.role }}
            </div>
            <div class="border-t my-2"></div>
            <a
              routerLink="/profile"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
            >
              <i class="bi bi-person mr-2"></i> Profile
            </a>
            <a
              routerLink="/settings"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
            >
              <i class="bi bi-gear mr-2"></i> Settings
            </a>
            <div class="border-t my-2"></div>
            <button
              (click)="logout()"
              class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
            >
              <i class="bi bi-box-arrow-left mr-2"></i> Logout
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
